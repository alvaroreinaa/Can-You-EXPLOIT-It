import sys, os
from setup import connect_database, update_database

# Update searchsploit
def update_searchsploit():
    os.system("sudo searchsploit -u > /dev/null")

# Get the mysql user and the mysql password
def get_argv():
    mysql_user = sys.argv[1]
    mysql_password = sys.argv[2]

    return [mysql_user, mysql_password]

# Establishes the connection with the database
def establish_connection(mysql_information):
    exploit_database = connect_database(mysql_information[0], mysql_information[1])
    mycursor = exploit_database.cursor()
    mycursor.execute("USE Can_You_EXPLOIT_It")
    update_database(exploit_database, mycursor)

if __name__ == "__main__":
    update_searchsploit()
    mysql_information = get_argv()
    establish_connection(mysql_information)